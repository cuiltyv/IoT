<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>IOT Team 5</title>
  <!-- link href="style.css" rel="stylesheet" type="text/css" / -->
</head>

<body>

<p>Visualizador de base de datos IOT equipo 5.</p>
<p>Lista de sensores registrados:</p>
<p id="displayListaSensores"></p>

<form>
  <button id="getButton" type="button" >Pedir lista de sensores</button>
</form>


<script defer>
  const getButton = document.getElementById('getButton')
  const display = document.getElementById('displayListaSensores')
  const baseUrl = 'http://localhost:3100/getSensorList'

  getButton.addEventListener('click', getInfo)

  async function getInfo(e){
    e.preventDefault()
    const res = await fetch(baseUrl, {method: 'GET'})
    const data = await res.json()
    text = data.info[0].nombre + "<br>"
    for (let i = 1; i < data.info.length; i++){
	    text += data.info[i].nombre + "<br>"
    }
    display.innerHTML = text
    console.log(text)
  }

</script>


</body>
</html>

